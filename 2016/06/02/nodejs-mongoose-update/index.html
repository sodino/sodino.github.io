
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="baidu_union_verify" content="d1952c66cf48912e21c18c7c581f382a">
  <meta name="360-site-verification" content="67fbcc5a67f4c65c057315b28fa0b2c8" />
<meta name="google-site-verification" content="2GzxQ0VtXwTSUdmGm6DzcmhTzM_I9QmzCb_pzpMzD88" />
  
    <title>【Node.js】mongoose教程08--更新 | Sodino&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="Sodino">
    
    <meta name="description" content="本文是存储了5个手机数据后再操作的。存储实现见文章：【Node.js】mongoose教程–存储。
GitHub源码链接：sodino#MongoDemo

Query.update()官方文档链接
12345678910111213141516171819202122232425262728293">
    
    
    
    
    <link rel="alternate" href="atom.xml" title="Sodino&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="stylesheet" href="/css/style.css">
    
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            var _bdId ='391982416296a0d54221f59fe35250d4';
             hm.src = "//hm.baidu.com/hm.js?" + _bdId;
             var s = document.getElementsByTagName("script")[0]; 
             s.parentNode.insertBefore(hm, s);
        })();
    </script>
     
</head>

  <body>
    <header>
      <div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Sodino&#39;s Blog">Sodino&#39;s Blog</a></h1>
				<a class="blog-motto">见多食广 与食巨近</a>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于我</a></li>
					
					<li>
					
                                            <form class="search" action=http://zhannei.baidu.com/cse/search target="_blank">
                                            <label>Search</label>
                                        <input name="s" type="hidden" value= null ><input type="text" name="q" size="30" placeholder="搜索"><br>
					
					</li>
				</ul>
                            </nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/06/02/nodejs-mongoose-update/" title="【Node.js】mongoose教程08--更新" itemprop="url">【Node.js】mongoose教程08--更新</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://sodino.com" title="Sodino">Sodino</a>
    </p>
  <p class="article-time">
    <time datetime="2016-06-02T09:04:13.000Z" itemprop="datePublished">2016 06 02</time>
    更新日期:<time datetime="2016-06-05T08:29:33.000Z" itemprop="dateModified">2016 06 05</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Query-update"><span class="toc-number">1.</span> <span class="toc-text">Query.update()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全量更新"><span class="toc-number">2.</span> <span class="toc-text">全量更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指定字段更新"><span class="toc-number">3.</span> <span class="toc-text">指定字段更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组的更新"><span class="toc-number">4.</span> <span class="toc-text">数组的更新</span></a></li></ol>
		</div>
		
		<p>本文是存储了5个手机数据后再操作的。存储实现见文章：<a href="/2016/06/01/nodejs-mongoose-save/">【Node.js】mongoose教程–存储</a>。</p>
<p>GitHub源码链接：<a href="https://github.com/sodino/MongoDemo" target="_blank" rel="external">sodino#MongoDemo</a></p>
<hr>
<h2 id="Query-update"><a href="#Query-update" class="headerlink" title="Query.update()"></a>Query.update()</h2><p><a href="http://mongoosejs.com/docs/api.html#query_Query-update" target="_blank" rel="external">官方文档链接</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line">Query#update([criteria], [doc], [options], [callback])</div><div class="line">  </div><div class="line">Declare and/or execute this query as an update() operation.</div><div class="line">  </div><div class="line">Parameters:</div><div class="line">  </div><div class="line">[criteria] &lt;Object&gt;</div><div class="line">[doc] &lt;Object&gt; the update command</div><div class="line">[options] &lt;Object&gt;</div><div class="line">[callback] &lt;Function&gt;</div><div class="line">Returns:</div><div class="line">  </div><div class="line">&lt;Query&gt; this</div><div class="line">See:</div><div class="line">  </div><div class="line">Model.update</div><div class="line">update</div><div class="line">All paths passed that are not $atomic operations will become $set ops.</div><div class="line">  </div><div class="line">Example</div><div class="line">  </div><div class="line">Model.where(&#123; _id: id &#125;).update(&#123; title: &apos;words&apos; &#125;)</div><div class="line">  </div><div class="line">// becomes</div><div class="line">  </div><div class="line">Model.where(&#123; _id: id &#125;).update(&#123; $set: &#123; title: &apos;words&apos; &#125;&#125;)</div><div class="line">Valid options:</div><div class="line">  </div><div class="line">safe (boolean) safe mode (defaults to value set in schema (true))</div><div class="line">upsert (boolean) whether to create the doc if it doesn&apos;t match (false)</div><div class="line">multi (boolean) whether multiple documents should be updated (false)</div><div class="line">runValidators: if true, runs update validators on this command. Update validators validate the update operation against the model&apos;s schema.</div><div class="line">setDefaultsOnInsert: if this and upsert are true, mongoose will apply the defaults specified in the model&apos;s schema if a new document is created. This option only works on MongoDB &gt;= 2.4 because it relies on MongoDB&apos;s $setOnInsert operator.</div><div class="line">strict (boolean) overrides the strict option for this update</div><div class="line">overwrite (boolean) disables update-only mode, allowing you to overwrite the doc (false)</div><div class="line">context (string) if set to &apos;query&apos; and runValidators is on, this will refer to the query in custom validator functions that update validation runs. Does nothing if runValidators is false.</div><div class="line">Note</div><div class="line">  </div><div class="line">Passing an empty object &#123;&#125; as the doc will result in a no-op unless the overwrite option is passed. Without the overwrite option set, the update operation will be ignored and the callback executed without sending the command to MongoDB so as to prevent accidently overwritting documents in the collection.</div><div class="line">  </div><div class="line">Note</div><div class="line">  </div><div class="line">The operation is only executed when a callback is passed. To force execution without a callback (which would be an unsafe write), we must first call update() and then execute it by using the exec() method.</div><div class="line">  </div><div class="line">var q = Model.where(&#123; _id: id &#125;);</div><div class="line">q.update(&#123; $set: &#123; name: &apos;bob&apos; &#125;&#125;).update(); // not executed</div><div class="line">  </div><div class="line">q.update(&#123; $set: &#123; name: &apos;bob&apos; &#125;&#125;).exec(); // executed as unsafe</div><div class="line">  </div><div class="line">// keys that are not $atomic ops become $set.</div><div class="line">// this executes the same command as the previous example.</div><div class="line">q.update(&#123; name: &apos;bob&apos; &#125;).exec();</div><div class="line">  </div><div class="line">// overwriting with empty docs</div><div class="line">var q = Model.where(&#123; _id: id &#125;).setOptions(&#123; overwrite: true &#125;)</div><div class="line">q.update(&#123; &#125;, callback); // executes</div><div class="line">  </div><div class="line">// multi update with overwrite to empty doc</div><div class="line">var q = Model.where(&#123; _id: id &#125;);</div><div class="line">q.setOptions(&#123; multi: true, overwrite: true &#125;)</div><div class="line">q.update(&#123; &#125;);</div><div class="line">q.update(callback); // executed</div><div class="line">  </div><div class="line">// multi updates</div><div class="line">Model.where()</div><div class="line">     .update(&#123; name: /^match/ &#125;, &#123; $set: &#123; arr: [] &#125;&#125;, &#123; multi: true &#125;, callback)</div><div class="line">  </div><div class="line">// more multi updates</div><div class="line">Model.where()</div><div class="line">     .setOptions(&#123; multi: true &#125;)</div><div class="line">     .update(&#123; $set: &#123; arr: [] &#125;&#125;, callback)</div><div class="line">  </div><div class="line">// single update by default</div><div class="line">Model.where(&#123; email: &apos;address@example.com&apos; &#125;)</div><div class="line">     .update(&#123; $inc: &#123; counter: 1 &#125;&#125;, callback)</div><div class="line">API summary</div><div class="line">  </div><div class="line">update(criteria, doc, options, cb) // executes</div><div class="line">update(criteria, doc, options)</div><div class="line">update(criteria, doc, cb) // executes</div><div class="line">update(criteria, doc)</div><div class="line">update(doc, cb) // executes</div><div class="line">update(doc)</div><div class="line">update(cb) // executes</div><div class="line">update(true) // executes (unsafe write)</div><div class="line">update()</div></pre></td></tr></table></figure>
<p>需要指出的是<code>Query.update()</code>在该方法没有回调参数<code>callback</code>或没有在链式代码末尾添加<code>.exec(callback)</code>时是不会真正去执行查询的。</p>
<p><code>更新</code>的功能看文档就好了，这章不想写…直接看下面代码吧</p>
<hr>
<h2 id="全量更新"><a href="#全量更新" class="headerlink" title="全量更新"></a>全量更新</h2><p><code>Query.update()</code>存储，即全量更新。<br>如下代码中是将<code>phone</code>对象所有的内容再存储一篇，虽然本来操作的意图只是想简单的更改<code>device</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">raw = require(&apos;./raw.huawei.Mate8.json&apos;);</div><div class="line">var huaweiMate8 = new Phone(raw);</div><div class="line"></div><div class="line">huaweiMate8.device = ‘Huawei Mate 8000&apos;;</div><div class="line"></div><div class="line">Phone.update(&#123;_id : huaweiMate8._id&#125;,</div><div class="line">	phone, // json对象即可</div><div class="line">	&#123;safe : true, upsert : true&#125;,</div><div class="line">	(err, rawResponse)=&gt;&#123;</div><div class="line">		console.log(&apos;---updateDeviceName()---------------------------------&apos;);</div><div class="line"> 		if (err) &#123;</div><div class="line"> 			console.log(err);</div><div class="line">		&#125; else &#123;</div><div class="line">			console.log(rawResponse);</div><div class="line">  </div><div class="line"> 			Phone.findOne(&#123;_id : phone._id&#125;, (err, phone) =&gt; &#123;</div><div class="line">				console.log(&apos;---device update to &quot;Huawei Mate 8000&quot;---------------------------------&apos;);</div><div class="line">				if (err) &#123;</div><div class="line">					console.log(err);</div><div class="line">				&#125; else &#123;</div><div class="line">					console.log(phone);</div><div class="line">				&#125;</div><div class="line"> 			addApps(phone);</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>控制台输出如下：</p>
<p><img src="http://ww3.sinaimg.cn/mw1024/e3dc9ceagw1f4h09b4kwpj20f207cjsl.jpg" alt="update"></p>
<hr>
<h2 id="指定字段更新"><a href="#指定字段更新" class="headerlink" title="指定字段更新"></a>指定字段更新</h2><p>在上面的代码中只更新了字段<code>device</code>，但实际却是将其它字段一并覆盖掉原有值了，虽然前后值是一样的，但明显可以用指定字段更新的方式获得更高的更新效率。</p>
<p>如下替换即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Phone.update(&#123;_id: huaweiMate8._id&#125;,</div><div class="line">	&#123;device : &apos;Huawei Mate 8000&apos;&#125;,</div><div class="line">	.... ....//其它代码一模一样</div><div class="line">);</div></pre></td></tr></table></figure>
<p>当然，也可以用<code>$set</code>操作符来实现，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Phone.update(&#123;_id: huaweiMate8._id&#125;,</div><div class="line">	&#123;$set : &#123;device : &apos;Huawei Mate 8000&apos;&#125;&#125;,</div><div class="line">	.... ....//其它代码一模一样</div><div class="line">);</div></pre></td></tr></table></figure>
<hr>
<h2 id="数组的更新"><a href="#数组的更新" class="headerlink" title="数组的更新"></a>数组的更新</h2><p>数组的更新有以下几种操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$addToSet  // 当且仅当待添加到数组的元素是当前数组所没有时，才会去添加</div><div class="line">$pop       // 当指定数组的修饰符值为-1时，删除该数组的第1个元素；当值为1时，删除最后一个元素</div><div class="line">$pull      // 删除指定查询条件下的数组元素</div><div class="line">$pullAll   // 删除数组中符合给定的集合的值的所有元素，与$pull的区别于目标删除元素是被逐一列举出来的</div><div class="line">$push      // 将元素添加到指定的数组中</div><div class="line">$pushAll   // 在2.4版本后建议不再使用，Sodino写累了也不想说了</div></pre></td></tr></table></figure>
<p>以下演示往<code>Phone.apps</code>数组中添加新应用<code>58City</code>，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">// 以下两种方式都可以</div><div class="line">   </div><div class="line">// 保存phone的全部信息</div><div class="line">phone.apps.push(&#123;name : &quot;58City&quot;&#125;);</div><div class="line">Phone.update(&#123;_id : phone._id&#125;, </div><div class="line">	phone, </div><div class="line">	&#123;safe : true, upsert : true&#125;,</div><div class="line">	(err, rawResponse) =&gt; &#123;</div><div class="line">		console.log(&apos;---addApps()---------------------------------&apos;);</div><div class="line">		if (err) &#123;</div><div class="line">			console.log(err);</div><div class="line">		&#125; else &#123;</div><div class="line">			console.log(rawResponse);</div><div class="line">   </div><div class="line">			Phone.findOne(&#123;_id : phone._id&#125;, (err, phone) =&gt; &#123;</div><div class="line">				console.log(&apos;---app:58City added.---------------------------------&apos;);</div><div class="line">				if (err) &#123;</div><div class="line">					console.log(err);</div><div class="line">				&#125; else &#123;</div><div class="line">					console.log(phone);</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">);</div><div class="line">   </div><div class="line">   </div><div class="line">// 只修改apps 这个数组</div><div class="line">Phone.update(&#123;_id : phone._id&#125;, </div><div class="line">	&#123;$push : &#123;apps : &#123;name : &apos;58City&apos;&#125;&#125;&#125;,</div><div class="line">	&#123;safe : true, upsert : true&#125;,</div><div class="line">	(err, rawResponse)=&gt;&#123;</div><div class="line">		console.log(&apos;---addApps()---------------------------------&apos;);</div><div class="line">		if (err) &#123;</div><div class="line">			console.log(err);</div><div class="line">		&#125; else &#123;</div><div class="line">			console.log(rawResponse);</div><div class="line">   </div><div class="line">			Phone.findOne(&#123;_id : phone._id&#125;, (err, phone) =&gt; &#123;</div><div class="line">				console.log(&apos;---app:58City added.---------------------------------&apos;);</div><div class="line">				if (err) &#123;</div><div class="line">					console.log(err);</div><div class="line">				&#125; else &#123;</div><div class="line">					console.log(phone);</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>控制台输出如下：<br><img src="http://ww2.sinaimg.cn/mw690/e3dc9ceagw1f4h10svo21j20ep07qmye.jpg" alt="addApps"></p>
<hr>
<p>相关链接：<br><a href="https://docs.mongodb.com/manual/reference/operator/update-field/" target="_blank" rel="external">Filed Update Operators</a><br><a href="https://docs.mongodb.com/manual/reference/operator/update-array/" target="_blank" rel="external">Array Update Operators</a></p>
<hr>
<p>下一篇<a href="/2016/06/02/nodejs-mongoose-remove/">mongoose教程–删除</a></p>
<hr>
<p><a href="http://sodino.com/about/">About Sodino</a></p>
  
	</div>
		<footer class="article-footer clearfix">

  <div class="article-tags">
  
  <span></span> <a href="/tags/Node-js/">Node.js</a>
  </div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Node-js/">Node.js</a>
</div>



<div class="article-share" id="share">

  <div data-url="http://sodino.com/2016/06/02/nodejs-mongoose-update/" data-title="【Node.js】mongoose教程08--更新 | Sodino&#39;s Blog" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/06/02/nodejs-mongoose-remove/" title="【Node.js】mongoose教程09--删除">
  <strong>PREVIOUS:</strong><br/>
  <span>
  【Node.js】mongoose教程09--删除</span>
</a>
</div>


<div class="next">
<a href="/2016/06/02/nodejs-mongoose-distinct-count/"  title="【Node.js】mongoose教程07--排重与计数">
 <strong>NEXT:</strong><br/> 
 <span>【Node.js】mongoose教程07--排重与计数
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Query-update"><span class="toc-number">1.</span> <span class="toc-text">Query.update()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全量更新"><span class="toc-number">2.</span> <span class="toc-text">全量更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指定字段更新"><span class="toc-number">3.</span> <span class="toc-text">指定字段更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数组的更新"><span class="toc-number">4.</span> <span class="toc-text">数组的更新</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">
<div id="authorInfo">
	
		<div class="author-logo"></div>		
	
	<div class="social-list" class="clearfix">
		
		<a href="http://weibo.com/3822886122" target="_blank" title="weibo"></a>
		
		
		
		<a href="https://github.com/sodino" target="_blank" title="github"></a>
		
		
		
	</div>
</div>

  
<div class="categorieslist">
	<p class="asidetitle">分类</p>
		<ul>
		
			<li><a href="/categories/android/" title="Android">Android<sup>13</sup></a></li>
		
			<li><a href="/categories/AndroidStudio/" title="AndroidStudio">AndroidStudio<sup>5</sup></a></li>
		
			<li><a href="/categories/C-C/" title="C/C++">C/C++<sup>26</sup></a></li>
		
			<li><a href="/categories/Eclipse/" title="Eclipse">Eclipse<sup>1</sup></a></li>
		
			<li><a href="/categories/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
		
			<li><a href="/categories/JDK/" title="JDK">JDK<sup>1</sup></a></li>
		
			<li><a href="/categories/JNI/" title="JNI">JNI<sup>2</sup></a></li>
		
			<li><a href="/categories/JavaScript/" title="JavaScript">JavaScript<sup>6</sup></a></li>
		
			<li><a href="/categories/LBS/" title="LBS">LBS<sup>1</sup></a></li>
		
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>7</sup></a></li>
		
			<li><a href="/categories/Mac/" title="Mac">Mac<sup>2</sup></a></li>
		
			<li><a href="/categories/Node-js/" title="Node.js">Node.js<sup>17</sup></a></li>
		
			<li><a href="/categories/Proguard/" title="Proguard">Proguard<sup>2</sup></a></li>
		
			<li><a href="/categories/React-Native/" title="React-Native">React-Native<sup>1</sup></a></li>
		
			<li><a href="/categories/blog/" title="blog">blog<sup>3</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/Android/" title="Android">Android<sup>18</sup></a></li>
		
			<li><a href="/tags/AndroidStudio/" title="AndroidStudio">AndroidStudio<sup>5</sup></a></li>
		
			<li><a href="/tags/C-C/" title="C/C++">C/C++<sup>25</sup></a></li>
		
			<li><a href="/tags/Eclipse/" title="Eclipse">Eclipse<sup>1</sup></a></li>
		
			<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
		
			<li><a href="/tags/JDK/" title="JDK">JDK<sup>1</sup></a></li>
		
			<li><a href="/tags/JNI/" title="JNI">JNI<sup>2</sup></a></li>
		
			<li><a href="/tags/Java/" title="Java">Java<sup>1</sup></a></li>
		
			<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>6</sup></a></li>
		
			<li><a href="/tags/LBS/" title="LBS">LBS<sup>1</sup></a></li>
		
			<li><a href="/tags/Linux/" title="Linux">Linux<sup>7</sup></a></li>
		
			<li><a href="/tags/Mac/" title="Mac">Mac<sup>2</sup></a></li>
		
			<li><a href="/tags/NDK/" title="NDK">NDK<sup>1</sup></a></li>
		
			<li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>17</sup></a></li>
		
			<li><a href="/tags/Proguard/" title="Proguard">Proguard<sup>2</sup></a></li>
		
			<li><a href="/tags/React-Native/" title="React-Native">React-Native<sup>1</sup></a></li>
		
			<li><a href="/tags/object-Object/" title="[object Object]">[object Object]<sup>1</sup></a></li>
		
			<li><a href="/tags/blog/" title="blog">blog<sup>3</sup></a></li>
		
			<li><a href="/tags/markdown/" title="markdown">markdown<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
      <li><a href="http://blog.csdn.net/sodino" target="_blank" title="Sodino Csdn">CSDN's Blog</a></li>
    </ul>
</div>


  <div class="rsspart">
	<a href="atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

  
  <div class="tagcloudlist">
    <p class="asidetitle">标签云</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Android/" style="font-size: 18.75px;">Android</a> <a href="/tags/AndroidStudio/" style="font-size: 13.75px;">AndroidStudio</a> <a href="/tags/C-C/" style="font-size: 20px;">C/C++</a> <a href="/tags/Eclipse/" style="font-size: 10px;">Eclipse</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/JNI/" style="font-size: 11.25px;">JNI</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/LBS/" style="font-size: 10px;">LBS</a> <a href="/tags/Linux/" style="font-size: 16.25px;">Linux</a> <a href="/tags/Mac/" style="font-size: 11.25px;">Mac</a> <a href="/tags/NDK/" style="font-size: 10px;">NDK</a> <a href="/tags/Node-js/" style="font-size: 17.5px;">Node.js</a> <a href="/tags/Proguard/" style="font-size: 11.25px;">Proguard</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/object-Object/" style="font-size: 10px;">[object Object]</a> <a href="/tags/blog/" style="font-size: 12.5px;">blog</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
    
            <p class="copyright"> © 2017 
		
		<a href="http://sodino.com" target="_blank" title="Sodino">Sodino</a>
		
            && Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"sodino"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





<script>
    
        var _bdImg = '4';
    
    window._bd_share_config={
        "common":{
            "bdSnsKey":{

            },
            "bdText":"",
            "bdMini":"2",
            "bdMiniList":[
                "qzone",
                "tsina",
                "weixin",
                "renren",
                "tqq",
                "tieba",
                "douban",
                "sqq",
                "diandian",
                "huaban",
                "youdao",
                "mail",
                "ty",
                "fbook",
                "twi",
                "linkedin",
                "copy",
                "print"
            ],
            "bdPic":"",
            "bdStyle":"0",
            "bdSize":"16"
        },
        "slide":{
            "type":"slide",
            "bdImg":_bdImg,
            "bdPos":"right",
            "bdTop":"350"
        },
        "image":{
            "viewList":[
                "weixin",
                "qzone",
                "tsina",
                "renren",
                "douban",
                "tqq"
            ],
            "viewText":"分享：",
            "viewSize":"16"
        },
        "selectShare":{
            "bdContainerClass":null,
            "bdSelectMiniList":[
                "weixin",
                "qzone",
                "tsina",
                "renren",
                "douban",
                "tqq"
            ]
        }
    };
    with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>




<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'null', 'null');  
ga('send', 'pageview');
</script>


  </body>
</html>

